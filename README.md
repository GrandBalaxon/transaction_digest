# Transaction Digest

## Описание:

Этот проект представляет собой бэкенд-компонент виджета для личного кабинета клиента банка. 
Виджет отображает несколько последних успешных банковских операций клиента.

## Установка:

1.  Установите [Poetry](https://python-poetry.org/docs/#installation).

2. Установите [Git](https://git-scm.com/downloads/win).

3. Клонируйте репозиторий:
```
git clone https://github.com/GrandBalaxon/transaction_digest.git
cd TransactionDigest
```

4. Установите зависимости проекта:
```
poetry install
```

## Использование:

(Здесь нужно будет добавить инструкции по использованию, когда `main.py` будет реализован)

## Функциональность:

Проект состоит из нескольких модулей, выполняющих следующие функции:

1) `src/masks.py`: Предоставляет функции для маскировки номеров банковских карт и счетов в соответствии с политиками безопасности банка.
   * `get_mask_card_number(card_number)`: Маскирует номер карты в формате `XXXX XX** **** XXXX`.
   * `get_mask_account(acc_number)`: Маскирует номер счета в формате `**XXXX`.
2) `src/processing.py`: Предоставляет функции для фильтрации и сортировки данных об операциях.
   * `filter_by_state(list_of_dicts, state="EXECUTED")`: Фильтрует список операций по статусу (по умолчанию "EXECUTED").
   * `sort_by_date(list_of_dicts, descending=True)`: Сортирует список операций по дате (по умолчанию в порядке убывания).
3) `src/widget.py`: Предоставляет функции для форматирования данных для виджета.
   * `mask_account_card(type_and_number)`: Маскирует номер карты или счета в строке.
   * `get_date(date)`: Форматирует дату в формат `ДД.ММ.ГГГГ`.

## Тестирование 

Этот проект использует `pytest` для автоматизированного тестирования.
Он должен быть уже у вас установлен, если вы прошли шаги с установкой проекта. 

Перед началом тестирования убедитесь, что у вас активировано виртуальное окружение проекта, а также, что вы находитесь в корневой директории проекта.

Для запуска всех тестов из директории `tests/` используйте команду:
```bash
pytest
```

Для проверки покрытия кода использован `pytest-cov`.
* Используйте следующую команду для отображения информации о покрытии внутри терминала
```bash
pytest --cov
```
* чтобы сгенерировать отчет о покрытии в HTML-формате, где `src` — пакет c модулями, которые тестируем. 
Отчет будет сгенерирован в папке `htmlcov` и храниться в файле с названием `index.html`.
```bash
pytest --cov=src --cov-report=html
```

## Лицензия:

Этот проект лицензирован по [лицензии MIT](LICENSE).

